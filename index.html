<!doctype html>
<html>
<head>
	<meta charset='utf-8'>
	<title>madeincluj</title>

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
	<!--[if lte IE 8]>
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
	<![endif]-->
	<link rel="stylesheet" type="text/css" href="css/adobe-blank.css"/>
	<link rel="stylesheet" href="css/leaflet.slider.css" />
	<link rel="stylesheet" type="text/css" href="css/app.css"/>
	
	<script type="text/javascript" src="//use.typekit.net/fda0kgu.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<!-- build:js lib.js -->
	<script type="text/javascript" src="js/lib/leaflet.js"></script>
	<script type="text/javascript" src="js/lib/d3.js"></script>
	<script type="text/javascript" src="js/lib/tile.stamen.js"></script>
	<script type="text/javascript" src="js/lib/Leaflet-Google.js"></script>	
	<script type="text/javascript" src="js/lib/leaflet.photomarker-src.js"></script>
	<script type="text/javascript" src="js/lib/leaflet-hash.js"></script>
	<script type="text/javascript" src="js/lib/jquery-1.10.2.min.js"></script>
	<script type="text/javascript" src="js/lib/handlebars.js"></script>
	<script type="text/javascript" src="js/lib/leaflet.d3.js"></script>
	<script type="text/javascript" src="js/lib/leaflet.slider.js"></script>
	<!-- endbuild -->

	<!-- build:js app.js -->
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/layer.instagram.js"></script>
	<script type="text/javascript" src="js/layer.building-photos.js"></script>
	<script type="text/javascript" src="js/layer.street-names.js"></script>
	<script type="text/javascript" src="js/layer.historical-maps.js"></script>
	<script type="text/javascript" src="js/layer.collection.js"></script>
	<script type="text/javascript" src="js/layer.toggle.js"></script>
	<script type="text/javascript" src="js/gmaps.js"></script>
	<script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>
	<!-- endbuild -->
</head>
<body>

	<div id='header' class='cf'>
		<h1>madeincluj</h1>
		<ul id="nav-time">
			<li><a href='#' data-year='1680'></a></li><!--
		 --><li class="selected"><a href='#' data-year="1848">1848</a></li><!--
		 --><li><a href='#' data-year="1941">1941</a></li><!--
		 --><li><a href='#' data-year="1990">1990</a></li>
		</ul>
		<ul id='nav'>
			<li><a href='#'>Despre proiect</a></li>
			<li><a href='#'>Echipa</a></li>
			<li><a href='#'>Contact</a></li>
		</ul>

		<div id='nav-layers'>
			<a href='#'>Straturi</a>
		</div>

		<div id='nav-3d' style='display:none;'>
			<a href="#">3D</a>
		</div>

	</div>
	<div id='map-container'>
		<div id='map'></div>
	</div>

	<div id='layers'>

	</div>

	<div id='popup-container'>
		<div class='popup-content'></div>
		<a href='#' class='close-popup'>&times;</a>
	</div>

	<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height='0' width='0' style="position:absolute; left:-99999px">
		<g>
		<clipPath id="bubble-mask">
			<path d="M94.5,45.239c0-24.577-19.923-44.5-44.5-44.5c-24.576,0-44.5,19.923-44.5,44.5c0,22.495,16.694,41.08,38.368,44.069l5.834,10.109l5.79-10.028C77.476,86.683,94.5,67.955,94.5,45.239z"/>
		</clipPath>
		<clipPath id="square-mask">
			<polygon points="8.5,1.5 8.5,85.5 43.637,85.5 50.19,96.852 56.744,85.5 92.5,85.5 92.5,1.5 "/>
		</clipPath>
		</g>
	</svg>
	<!-- templates -->

	<!-- Building and Collection photomarker template -->
	<script id='tmpl-round-photo-marker' type='text/x-handlebars'>
		<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"> 
		<image clip-path="url(#bubble-mask)" height="100%" width="100%" xlink:href="{{ url }}" />
		</svg>
	</script>

	<!-- Instagram marker template -->
	<script id='tmpl-square-photo-marker' type='text/x-handlebars'>
		<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"> 
		<image clip-path="url(#square-mask)" height="100%" width="100%" xlink:href="{{ url }}" />
		</svg>
	</script>

	<!-- TODO: if we use the below template with photo markers, replace images.thumbnail.url
	 with url and images.thumbnail.width and height with size.width and height  -->
	<script id='tmpl-square-photo-marker-old' type='text/x-handlebars'>
		<div class='instagram-marker {{type}}'>
			<div class='photo'>
				<img src="{{images.thumbnail.url}}" width="{{images.thumbnail.width}}" height="{{images.thumbnail.height}}"/>
			</div>
		</div>
	</script>

	<!-- Instagram popup template -->
	<script id='tmpl-instagram-item' type='text/x-handlebars'>
		<div class='instagram-item'>
			<div class='photo'>
				<img src="{{images.standard_resolution.url}}" height="{{images.standard_resolution.height}}"
				width="{{images.standard_resolution.width}}"/>
			</div>
			<div class='meta'>
				<img src="{{user.photo}}" height="25" width="25"/>
				<span><a href="{{user.url}}">{{user.name}}</a>, {{caption}}</span>
			</div>
		</div>
	</script>

	<!-- Building popup template -->
	<script id='tmpl-building-item' type='text/x-handlebars'>


		<div class='building-item'>

			<div class='item-gallery'>

				<div class='item-gallery-view'>
					<img src={{ photos.0.large }}/>
				</div>
				
				<div class='item-gallery-thumbs'>
				{{#each photos}}
					<img src='{{thumb}}' data-large='{{large}}'/>
				{{/each}}
				</div>

			</div>

			<div class='item-info'>
				<h2>{{ name }}</h2>
				<h3>{{ architect }}, {{ year }}</h3>

				<div class='item-description'>{{ description }}</div>
			</div>

		</div>

	</script>

	<!-- Street name popup template -->
	<script id='tmpl-street-name-item' type='text/x-handlebars'>

		<div class='street-item'>
			<h2>{{ name }}</h2>
			<div class='street-item-description'>
				{{ description.ro }}
			</div>
			<ul class='street-item-history'>
				{{#each historical_names}}
				<li><strong>{{ year }}</strong> {{ ro }}</li>
				{{/each}}
			</ul>

			<a href='site/strazi/{{slug}}/' target='_blank'>Deschide în pagină nouă</a>
		</div>

	</script>

	<!-- Collection popup template -->
	<script id='tmpl-collection-item' type='text/x-handlebars'>
		<div class='collection-item'>
			<div class='collection-item-photo'><img src='{{properties.photo.large}}'/></div>
			<div class='collection-item-caption'><strong>{{properties.year}}</strong> {{properties.description}}</div>
		</div>
	</script>

	<script id='tmpl-layer-toggle-item' type='text/x-handlebars'>
		<div class='layer' {{#if data_name}} data-name={{ data_name }} {{/if}}>
			{{#if thumbnail_url}}
			<img src='{{ thumbnail_url }}'/>
			{{/if}}
			{{#if name}}
				<h3>{{ name }}</h3>
			{{/if}}
			{{#if description}}
				<p>{{ description }}</p>
			{{/if}}
			{{#if layers}}
				{{#each layers}}
					<div class='sub-layer' data-name={{ data_name }}>
						<h4>{{ name }}</h4>
						<p>{{ description }}</p>
					</div>
				{{/each}}
			{{/if}}
		</div>
	</script>

	<script type="text/javascript">
		MIC.initialize();
	</script>

</body>
</html>
